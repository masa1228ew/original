package com.example.origin.service;

import org.springframework.stereotype.Service;

import com.example.origin.entity.Collection;
import com.example.origin.entity.Genre;
import com.example.origin.form.CollectionRegisterForm;
import com.example.origin.repository.CollectionRepository;

import jakarta.transaction.Transactional;

@Service
public class CollectionService {
	private final CollectionRepository collectionRepository;
	private final GenreRepository genreRepository;
	public CollectionService(CollectionRepository collectionRepository,GenreRepository genreRepository) {
		this.collectionRepository = collectionRepository;
		this.genreRepository = genreRepository;
	}
	
	@Transactional
	public void create(CollectionRegisterForm collectionRegisterForm) {
		Collection collection = new Collection();
		Genre genre = genreRepository.getReferenceById(collectionRegisterForm.getGenre());
	collection.setName(collectionRegisterForm.getName());
	collection.setGenre(genre);
	
	collectionRepository.save(collection);
}
}