package com.example.origin.controller;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort.Direction;
import org.springframework.data.web.PageableDefault;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import com.example.origin.entity.Datas;
import com.example.origin.repository.DatasRepository;

@Controller
@RequestMapping("/data")
public class DataController {
	private final DatasRepository datasRepository;
	
	public DataController(DatasRepository datasRepository) {
		this.datasRepository = datasRepository;
	}
	  @GetMapping("/{id}")
	    public String index(Model model, @PageableDefault(page = 0, size = 10, sort = "id", direction = Direction.ASC)Pageable pageable) {
		  System.out.println("テスト");
		  Page<Datas> datasPage = datasRepository.findAll(pageable);
		  System.out.println("テスト2");
		  model.addAttribute("datasPage", datasPage); 
		  System.out.println("テスト3");
		  System.out.println(datasPage);
	        return "data/index";
	    }   
	  
	  @GetMapping("/register")
	    public String register() {
	        return "data/register";
	    }  
	  
	  @GetMapping("/high")
	    public String high() {
	        return "data/high";
	    }  
	  
	  @GetMapping("/amount")
	    public String amount() {
	        return "data/amount";
	    }  
	  
	  @GetMapping("/edit")
	    public String edit() {
	        return "data/edit";
	    }  
}
