package com.example.origin.service;

import org.springframework.stereotype.Service;

import com.example.origin.entity.Collection;
import com.example.origin.entity.Datas;
import com.example.origin.repository.CollectionRepository;
import com.example.origin.repository.DatasRepository;

@Service
public class DatasService {

	private final DatasRepository datasRepository;
	private final GenreService genreService;
	private final CollectionRepository collectionRepository;
	
	public DatasService(DatasRepository datasRepository
						,GenreService genreService
						,CollectionRepository collectionRepository) {
		this.datasRepository = datasRepository;
		this.genreService = genreService;
		this.collectionRepository = collectionRepository;
	}
	
	 public Datas createData(String dataName, String collectionName, Integer categoryId, Integer price) {
	        // collectionName を基に collection を取得
	        Collection collection = collectionRepository.findByName(collectionName);
	        if (collection == null) {
	            throw new IllegalArgumentException("Collection not found: " + collectionName);
	        }

	        // datas テーブルにデータを挿入
	        Datas data = new Datas();
	        data.setName(dataName);
	        data.setCollection(collection.getId());
	        data.setCategory(categoryId);
	        data.setPrice(price);

	        return datasRepository.save(data);
	    }
	
	
}
